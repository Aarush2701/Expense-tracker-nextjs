(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{5732:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(9506)}])},9506:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(5893),a=n(7294),o=n(1163),r=n(923),i=e=>{let{expenses:t,deleteExpens:n}=e;return(0,s.jsx)("div",{className:"expense-list",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"expense-item",children:[(0,s.jsx)("button",{className:"delete-button",onClick:()=>n(e._id),children:"X"}),(0,s.jsx)("div",{className:"expense-description",children:e.text}),(0,s.jsxs)("div",{className:"expense-amount",style:{color:e.amount>0?"#27ae60":"#c0392b"},children:["₹",e.amount]})]},t))})},l=function(e){let{incomeAmt:t,expenseAmt:n}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:["Your Balance is ₹ ",t-n]}),(0,s.jsxs)("div",{className:"amounts-container",children:["Income",(0,s.jsxs)("span",{className:"income-amount",children:["₹",t]}),"Expense",(0,s.jsxs)("span",{className:"expense-amount",children:["₹",n]})]})]})},c=function(e){let{addTransaction:t}=e,[n,o]=(0,a.useState)({amount:"",text:""}),i=e=>{let{name:t,value:s}=e.target,a={...n};a[t]=s,o(a)};return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{children:"Expense Tracker"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let{amount:s,text:a}=n;if(!s||!a){(0,r.S3)("Please add Expense Details");return}t(n),o({amount:"",text:""})},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"text",children:"Expense Detail"}),(0,s.jsx)("input",{onChange:i,type:"text",name:"text",placeholder:"Enter your Expense Detail...",value:n.text})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,s.jsx)("input",{onChange:i,type:"number",name:"amount",placeholder:"Enter your Amount...",value:n.amount})]}),(0,s.jsx)("button",{type:"submit",children:"Add Expense"})]})]})},d=n(7066),u=n(2305),h=n(971),m=n(539),x=n(4487),p=n(6910),g=n(3447);let f=["#0088FE","#00C49F","#FFBB28","#FF8042","#A28FDB","#FF6666"];var j=function(){let[e,t]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{o(window.innerWidth<=410)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token"),n=await d.Z.get("".concat(r.fG,"/expenses/category-summary"),{headers:{Authorization:e}});t(n.data)}catch(e){console.error("❌ Failed to fetch category summary:",e.message)}})()},[]),(0,s.jsxs)("div",{className:"piechartdiv",style:{width:"100%",maxWidth:"600px",margin:"0 auto",padding:"10px",boxSizing:"border-box"},children:[(0,s.jsx)("h2",{className:"piecharthead",style:{textAlign:"center",fontWeight:"bold",marginBottom:"10px"},children:"Expenses by Category"}),0===e.length?(0,s.jsx)("p",{className:"piechart-empty",style:{textAlign:"center"},children:"No categorized expenses to display."}):(0,s.jsx)("div",{style:{width:"100%",height:n?"300px":"450px"},children:(0,s.jsx)(u.h,{width:"100%",height:"100%",children:(0,s.jsxs)(h.u,{children:[(0,s.jsx)(m.b,{data:e,dataKey:"amount",nameKey:"category",cx:"50%",cy:"50%",outerRadius:n?100:150,label:e=>{let{category:t,amount:s}=e;return n?"":"".concat(t,": ₹").concat(s)},labelLine:!n,children:e.map((e,t)=>(0,s.jsx)(x.b,{fill:f[t%f.length]},"cell-".concat(t)))}),(0,s.jsx)(p.u,{formatter:(e,t)=>["₹".concat(e),t]}),(0,s.jsx)(g.D,{layout:"horizontal",verticalAlign:"bottom",align:"center",wrapperStyle:{fontSize:n?"12px":"14px",paddingTop:"10px",textAlign:"center"}})]})})})]})};function y(){let[e,t]=(0,a.useState)(""),[n,d]=(0,a.useState)([]),[u,h]=(0,a.useState)(0),[m,x]=(0,a.useState)(0),p=(0,o.useRouter)();(0,a.useEffect)(()=>{t(localStorage.getItem("loggedInUser"))},[]),(0,a.useEffect)(()=>{let e=n.map(e=>e.amount),t=e.filter(e=>e>0).reduce((e,t)=>e+t,0),s=-1*e.filter(e=>e<0).reduce((e,t)=>e+t,0);h(t),x(s)},[n]);let g=async e=>{try{let t="".concat(r.fG,"/expenses/").concat(e),n={headers:{Authorization:localStorage.getItem("token")},method:"DELETE"},s=await fetch(t,n);if(403===s.status){localStorage.removeItem("token"),p.push("/login");return}let a=await s.json();(0,r.sE)(null==a?void 0:a.message),setTimeout(()=>{window.location.reload()},200)}catch(e){(0,r.S3)(e)}},f=async()=>{try{let e="".concat(r.fG,"/expenses"),t={headers:{Authorization:localStorage.getItem("token")}},n=await fetch(e,t);if(403===n.status){localStorage.removeItem("token"),p.push("/login");return}let s=await n.json();d(s.data)}catch(e){(0,r.S3)(e)}},y=async e=>{try{let t="".concat(r.fG,"/expenses"),n={headers:{Authorization:localStorage.getItem("token"),"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)},s=await fetch(t,n);if(403===s.status){localStorage.removeItem("token"),p.push("/login");return}let a=await s.json();(0,r.sE)(null==a?void 0:a.message),setTimeout(()=>{window.location.reload()},200)}catch(e){(0,r.S3)(e)}};return(0,a.useEffect)(()=>{f()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"user-section",children:[(0,s.jsxs)("h1",{className:"mainhead",children:["Welcome ",e]}),(0,s.jsx)("button",{className:"logbtn",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("loggedInUser"),(0,r.sE)("User Logged out"),setTimeout(()=>{p.push("/login")},500)},children:"Logout"})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"50px",alignItems:"flex-start"},children:[(0,s.jsxs)("div",{className:"nodeelement",children:[(0,s.jsx)(l,{incomeAmt:u,expenseAmt:m}),(0,s.jsx)(c,{addTransaction:y})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"txnloghead",children:"Transaction Logs"}),(0,s.jsx)(i,{expenses:n,deleteExpens:g})]}),(0,s.jsx)("div",{className:"piechart",children:(0,s.jsx)(j,{expenses:n})})]})]})}},923:function(e,t,n){"use strict";n.d(t,{S3:function(){return o},fG:function(){return r},sE:function(){return a}});var s=n(5678);let a=e=>{s.Am.success(e,{position:"top-right"})},o=e=>{s.Am.error(e,{position:"top-right"})},r="https://expense-tracker-dkte.onrender.com"}},function(e){e.O(0,[114,888,774,179],function(){return e(e.s=5732)}),_N_E=e.O()}]);